<!doctype html>
<html>
  <head>
    <!-- The browser can use non-English-language characters (...kind of) -->
      <meta charset="utf-8">
      <title>A Look at Love Actually</title>
      <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
      <link href="https://fonts.googleapis.com/css?family=Playball" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css?family=Aref+Ruqaa|Courgette|Pacifico" rel="stylesheet">
      <script>
      function myfun(){
      $(".dropdown-menu li a").click(function(){
        $(this).parents(".btn-group").find('.selection').text($(this).text());
        $(this).parents(".btn-group").find('.selection').val($(this).text());
      });
      }
      </script>
      <style>
        * {
          font-family: "Helvetica Neue", sans-serif;
          margin:0;
          padding:0;
          border: 0;
          outline: 0;
          font-size: 100%;
          vertical-align: baseline;
          background: transparent;
        }
        p, text {
          font-size: 18px;
          text-align: left;
        }
        body {
          margin-left: auto;
          margin-right: auto;
          width:1100px;
          text-align: center;
        }
        h3 {
          margin:10px;
        }
        div.tooltip {
          position: absolute;
          text-align: center;
          color: black;
          width: 160px;
          padding: 5px;
          font: 13px sans-serif;
          font-family: "PT Sans", sans-serif;
          background: lightgray;
          border: 0px;
          border-radius: 4px;
          pointer-events: none;
          opacity: 0.6;
          z-index: 2;
        }
        .grid line {
          stroke: lightgrey;
          stroke-opacity: 0.4;
          stroke-dasharray: 2;
          stroke-linecap: "butt"
        }
        .grid2 line {
          stroke: grey;
          stroke-opacity: 0.6;
          stroke-dasharray: 2;
          stroke-linecap: "butt"
        }
        .grid path {
          stroke-width: 0;
        }
        #ribbon {
          z-index:-1; 
          height:100%; 
          left:70px; 
          position:fixed;
          top:0px; 
        }
        #bow {
          /*position:fixed;*/
          position:absolute;
          left:-30px;
          height:250px;
          width:250px;
        }
        div.scene{
          margin: 0px 200px 0px 0px;
          text-align: center;
        }
        div.btn-group {
          padding-top: 10px;
        }
        *, *:before, *:after {
          box-sizing: border-box;
        }
        @media (min-width: 600px) {
          body {
            padding: 60px;
          }
        }
        .range-slider {
          margin: 60px 0 0 0%;
          /*width: 100%;*/
          width:960px;
        }
        .range-slider__range {
          -webkit-appearance: none;
          /*width: calc(100% - (73px));*/
          width: calc(960px-73px);
          height: 10px;
          border-radius: 5px;
          background: #d7dcdf;
          outline: none;
          padding: 0;
          margin: 0;
        }
        .range-slider__range::-webkit-slider-thumb {
          -webkit-appearance: none;
                  appearance: none;
          width: 20px;
          height: 20px;
          border-radius: 50%;
          background: #2c3e50;
          cursor: pointer;
          -webkit-transition: background .15s ease-in-out;
          transition: background .15s ease-in-out;
        }
        .range-slider__range::-webkit-slider-thumb:hover {
          background: #1abc9c;
        }
        .range-slider__range:active::-webkit-slider-thumb {
          background: #1abc9c;
        }
        .range-slider__range::-moz-range-thumb {
          width: 20px;
          height: 20px;
          border: 0;
          border-radius: 50%;
          background: #2c3e50;
          cursor: pointer;
          -webkit-transition: background .15s ease-in-out;
          transition: background .15s ease-in-out;
        }
        .range-slider__range::-moz-range-thumb:hover {
          background: #1abc9c;
        }
        .range-slider__range:active::-moz-range-thumb {
          background: #1abc9c;
        }
        .range-slider__value {
          display: inline-block;
          position: relative;
          width: 60px;
          color: #fff;
          line-height: 20px;
          text-align: center;
          border-radius: 3px;
          background: #2c3e50;
          padding: 5px 10px;
          margin-left: 8px;
        }
        .range-slider__value:after {
          position: absolute;
          top: 8px;
          left: -7px;
          width: 0;
          height: 0;
          border-top: 7px solid transparent;
          border-right: 7px solid #2c3e50;
          border-bottom: 7px solid transparent;
          content: '';
        }
        ::-moz-range-track {
          background: #d7dcdf;
          border: 0;
        }
        input::-moz-focus-inner,
        input::-moz-focus-outer {
          border: 0;
        }
        .more {
          border-radius: 8px;
        }
        .barLinelabel {
          font-size: 12px;
        }
      </style>
  </head>
  <body>

    <img src="ribbon2_no_bow.png" id="ribbon">
    <img src="ribbon2.png" id="bow">

    <section>
      <h1 style="font-size:72px;"><br/>A Look at <br/><span style="font-family: 'Playball', cursive; color:#b61210; font-size:108px;">Love Actually</span><br/><br/></h1>
      <h3 style="font-size:32px;">A visual dive into the characters and their stories <br/><br/><span style="font-size:24px"> by <br/>Stephanie Doctor, Daanish Raj, and Amla Srivastava</span></h3>
    </section>

    <h3 class="section-break-space"><br/></h3>
    <hr>
    <h3 class="section-break-space"><br/></h3>

    <section>
      <p>It's that time of year; trees are being lit, gifts are being wrapped, and you can't seem to stop hearing "Frosty the Snowman" on repeat. If you're in the holiday spirit, you might sit down to Netflix Love Actually, the Christmas-y multiple-storyline rom-com from 2003. But why simply watch it when you can do so much more?<br/><br/></p>

      <img src="so_much_more.gif">

      <p><br/>Last year, David Robinson at Variance Explained <a href="http://varianceexplained.org/r/love-actually-network/">described how he used R to parse a Love Actually script</a>, creating a data frame of the lines attributed to the movie’s main characters. He rather conveniently included the code he used to do it, so we were able to replicate his work and use it to visualize the characters and interactions ourselves, using d3.js.<br/></p>
    </section>

    <h3 class="section-break-space"><br/></h3>
    <hr>
    <h3 class="section-break-space"><br/></h3>

    <section>
      <!-- <h4>What is the overall structure of the movie?</h4> -->
      <!-- <p></p> -->

      <p>Starting off broadly, we first look at the number of characters and lines in each scene of the movie. The number of characters remains mostly steady throughout, but the number of lines varies greatly. A notable exception is the last scene, in which many of the main characters appear and the movie wraps up.</p>

      <div id="bar-graph-1"></div>
      <div id="bar-graph-2"></div>
    </section>

    <h3 class="section-break-space"><br/></h3>
    <hr>
    <h3 class="section-break-space"><br/></h3>

    <section id = 'amla'>

      <p>Going deeper, we can split this up by character, highlight by gender, and zoom in on scenes of interest. In this chart, bubbles are sized by the number of lines spoken in a scene. We can start to see scenes or groups of scenes in which certain characters appear at the same time. The last scene, which we saw in the previous chart featured many characters, is also notable here in that most characters appear but have relatively few lines each.<br/><br/></p>

      <div class = "container">

        <div class = "scene">

          <div class="btn-group">
            
            <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" onclick = "myfun()">Gender: <span class="selection">All </span> <span class="caret"></span>
            </button>
            
            <ul class="dropdown-menu" role="menu">
              <li><a href="#amla" id ="a">All</a></li>
              <li><a href="#amla" id = "m">Male</a></li>
              <li><a href="#amla" id = "f">Female</a></li>
            </ul>
          
          </div>
        
        </div>

        <div class="range-slider">
          <input class="range-slider__range" type="range" value="80" min="1" max="80" id ="nRadius">
        </div>
        
        <div class = "scene">
          <h4><b><br/>Scene 1 - <span id = "nRadius-value" style="color:#b61210">80</span></b></h4>
        </div>

      </div>
        
      <div id="bubble-grid"></div>
    </section>

    <h3 class="section-break-space"><br/></h3>
    <hr>
    <h3 class="section-break-space"><br/></h3>

    <section>
      
      <p>Finally, we use a force diagram to look at character interactions. In this graph, characters are connected by lines, with the lines’ weights based on the number of scenes they appear in together (but only if it’s more than one). You can highlight certain types of relationships, hover over the characters to find out their names and the actors who played them, and drag their pictures around to explore.<br/></p>

      <p>There’s a few interesting things that pop out here, including the love triangles (Peter-Juliet-Mark, Karen-Harry-Mia) and the characters who don’t interact much with most others (like Billy and Joe).<br/><br/><br/></p>

      <p style="text-align: center;"><b><span style="color:#b61210">&mdash;</span>Romantic &nbsp;<span style="color:#fc9272">&mdash;</span>Friendship &nbsp;<span style="color:#ffdf35">&mdash;</span>Family &nbsp;<span style="color:black">&mdash;</span>Work &nbsp;</b></p>

      <!-- <p style="text-align: center;">
          <label class="form-check-inline">
            <input class="form-check-input" type="radio" id="all" name="relationship"> All&nbsp;&nbsp;
          </label>
          <label class="form-check-inline">
            <input class="form-check-input" type="radio" id="romantic" name="relationship"> Romantic&nbsp;&nbsp;
          </label>
          <label class="form-check-inline">
            <input class="form-check-input" type="radio" id="friendship" name="relationship"> Friendship&nbsp;&nbsp;
          </label>
          <label class="form-check-inline">
            <input class="form-check-input" type="radio" id="family" name="relationship"> Family&nbsp;&nbsp;
          </label>
          <label class="form-check-inline">
            <input class="form-check-input" type="radio" id="work" name="relationship"> Work&nbsp;&nbsp;
          </label>
      </p> -->
      <div id="interactions"></div>

    </section>

    <!-- <h3 class="section-break-space"><br/></h3> -->
    <hr>
    <h3 class="section-break-space"><br/></h3>

    <section>

      <p>What's the takeaway here? It turns out you can make a data viz out of just about anything.<br/></p>

    </section>

    <h3 class="section-break-space"><br/></h3>
    <hr>
    <h3 class="section-break-space"><br/></h3>

    <section>

      <p>This project was made possible through Jonathan Soma's Storytelling with Data course at the Columbia University School of Journalism.</p>

    </section>

    <!-- This is D3, our graphing library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.2/d3.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <!-- Now we include our actual visualization -->
    <script src="amla_chart-1-3.js"></script>
    <script src="daanish_chart-1-3.js"></script>
    <script src="daanish_chart-2-3.js"></script>
    <script src="steph_node-link.js"></script>

  </body>
</html>
